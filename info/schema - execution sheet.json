{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "properties": {
    "id": {
      "type": "number"
    },
    "starting_date": {
      "type": "string",
      "format": "date"
    },
    "finishing_date": {
      "type": "string",
      "format": "date"
    },
    "last_activity_date": {
      "type": "string",
      "format": "date"
    },
    "observations": {
      "type": "string"
    },
    "operations": {
      "type": "array",
      "minItems": 1,
      "maxItems": 5,
      "uniqueItems": true,
      "items": {
        "type": "object",
        "properties": {
          "operation_code": {
            "type": "string"
          },
          "area_ha_executed": {
            "type": "number"
          },
          "area_perc": {
            "type": "number"
          },
          "starting_date": {
            "type": "string",
            "format": "date"
          },
          "finishing_date": {
            "type": "string",
            "format": "date"
          },
          "observations": {
            "type": "string"
          }
        },
        "required": [
          "operation_code",
          "area_ha_executed",
          "area_perc",
          "starting_date"
        ],
        "additionalProperties": false
      }
    },
    "polygons_operations": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "polygon_id": {
            "type": "number"
          },
          "operations": {
            "type": "array",
            "minItems": 1,
            "maxItems": 5,
            "uniqueItems": true,
            "items": {
              "type": "object",
              "properties": {
                "operation_id": {
                  "type": "number"
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "unassigned",
                    "assigned",
                    "ongoing",
                    "completed"
                  ]
                },
                "starting_date": {
                  "type": "string",
                  "format": "date"
                },
                "finishing_date": {
                  "type": "string",
                  "format": "date"
                },
                "last_activity_date": {
                  "type": "string",
                  "format": "date"
                },
                "observations": {
                  "type": "string"
                },
                "tracks": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": [
                      "type",
                      "coordinates"
                    ],
                    "properties": {
                      "type": {
                        "type": "string",
                        "const": "LineString"
                      },
                      "coordinates": {
                        "type": "array",
                        "minItems": 2,
                        "items": {
                          "type": "array",
                          "minItems": 2,
                          "maxItems": 2,
                          "items": {
                            "type": "number"
                          }
                        }
                      }
                    },
                    "additionalProperties": false
                  }
                }
              },
              "required": [
                "operation_id",
                "status"
              ],
              "additionalProperties": false
            }
          }
        }
      },
      "required": [
        "polygon_id",
        "operations"
      ],
      "additionalProperties": false
    }
  },
  "required": [
    "id",
    "starting_date",
    "polygons_operations",
    "operations"
  ],
  "additionalProperties": false
}